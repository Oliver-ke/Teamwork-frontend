(this["webpackJsonpteamwork-frontend"]=this["webpackJsonpteamwork-frontend"]||[]).push([[0],{177:function(e,t,r){e.exports=r.p+"static/media/team.bcdbf0b8.svg"},180:function(e,t,r){e.exports=r.p+"static/media/avater.6a3966fb.svg"},194:function(e,t,r){e.exports=r(327)},324:function(e,t,r){},325:function(e,t,r){},327:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),l=r(36),c=r.n(l),o=r(28),u=r(59),i=r(43),s=r(346),m=r(17),p=r(29),d=r(51),f=r(342),E=r(344),b=r(338),h=r(328),O=r(26),g=r.n(O),v=r(49),y=r(161),j=r.n(y);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function(e){return"".concat("https://teammi.herokuapp.com/api/v1").concat(e)},S=function(){var e=Object(v.a)(g.a.mark((function e(t,r){var a,n,l,c,o,u=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:null,n=u.length>3&&void 0!==u[3]?u[3]:null,l={method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},"POST"!==r&&"PATCH"!==r&&"PUT"!==r||(l.body=a?JSON.stringify(a):""),e.prev=4,e.next=7,fetch(t,l);case 7:return c=e.sent,e.next=10,c.json();case 10:return o=e.sent,e.abrupt("return",R({},o,{statusCode:c.status}));case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,r){return e.apply(this,arguments)}}(),k=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var N=function(e){var t=e.loginUser,r=e.clearAuthError,l=e.auth,c=e.history,o=Object(a.useState)({email:"",password:""}),u=Object(p.a)(o,2),i=u[0],s=u[1];Object(a.useEffect)((function(){l.isAuthenticated&&c.push("/dashboard")}),[l.isAuthenticated,c]);var O=function(e){var t=e.target,r=t.value,a=t.name;return s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i,Object(m.a)({},a,r)))},g=l.loading,v=l.error;return n.a.createElement("div",{className:"login-container"},n.a.createElement("h1",null,n.a.createElement(d.a,{name:"user circle outline",size:"big"})," ",n.a.createElement("br",null)," Login"),n.a.createElement(f.a,{error:!!v,loading:g,onSubmit:function(){return i.email&&i.password?t(i):"error"}},n.a.createElement(E.a,{onDismiss:r,error:!0,header:"Authentication Error",content:"Incorrect email or password"}),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Email"),n.a.createElement(b.a,{size:"large",iconPosition:"left",placeholder:"Email"},n.a.createElement(d.a,{name:"at"}),n.a.createElement("input",{name:"email",value:i.email,onChange:O,type:"email"}))),n.a.createElement(f.a.Field,null,n.a.createElement("label",null,"Password"),n.a.createElement(b.a,{size:"large",iconPosition:"left",placeholder:"password"},n.a.createElement(d.a,{name:"key"}),n.a.createElement("input",{name:"password",value:i.password,onChange:O,type:"password"}))),n.a.createElement(h.a,{fluid:!0,size:"large",type:"submit"},"Login")))};N.defaultProps={history:{}};var D=Object(o.b)((function(e){return{auth:e.auth}}),{loginUser:function(e){return function(){var t=Object(v.a)(g.a.mark((function t(r){var a,n,l,c,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=P("/auth/signin"),r({type:"AUTH_LOADING"}),t.next=4,S(a,"POST",e);case 4:if(200===(n=t.sent).statusCode){t.next=7;break}return t.abrupt("return",r({type:"AUTH_ERROR",payload:n}));case 7:return l=n.data,c=l.token,localStorage.setItem("jwtToken",c),o=j()(c),t.abrupt("return",r({type:"SET_CURRENT_USER",payload:{user:o,token:c}}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearAuthError:function(){return function(e){e({type:"CLEAR_AUTH_ERROR"})}}})(N),A=r(184),U=r(177),_=r.n(U),T=function(){return n.a.createElement("div",{className:"aside"},n.a.createElement("h1",{className:"logo"},"<","Team",n.a.createElement("span",null,"Work","/>")),n.a.createElement(A.a,{size:"large",src:_.a,centered:!0}))},x=function(e){var t=e.history;return n.a.createElement(s.a,{verticalAlign:"middle"},n.a.createElement(s.a.Row,null,n.a.createElement(s.a.Column,{only:"large screen",computer:8},n.a.createElement(T,null)),n.a.createElement(s.a.Column,{stretched:!0,mobile:16,computer:8},n.a.createElement(D,{history:t}))))},F=r(178),G=Object(o.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,r=e.auth,a=Object(F.a)(e,["component","auth"]);return n.a.createElement(i.b,Object.assign({},a,{render:function(e){return!0===r.isAuthenticated?n.a.createElement(t,e):n.a.createElement(i.a,{to:"/"})}}))})),H=function(e){var t=e.link,r=e.iconName,a=e.content;return n.a.createElement("li",null,n.a.createElement(u.b,{to:t},n.a.createElement(d.a,{className:"icon-bottom",name:r,size:"large"}),a))},L="dashboard",q=[{link:"/".concat(L),iconName:"feed",content:"Feeds"},{link:"/".concat(L,"/gif"),iconName:"smile outline",content:"Gifs"},{link:"/".concat(L,"/article"),iconName:"newspaper outline",content:"Article"},{link:"/".concat(L,"/profile"),iconName:"user outline",content:"Profile"},{link:"/".concat(L,"/users"),iconName:"users",content:"Users"}],I=r(180),z=r.n(I),J=function(e){var t=e.toggler,r=e.isOpen;return n.a.createElement("div",null,n.a.createElement("div",{className:r?"sidebar":"sidebar is-close"},n.a.createElement("h1",{className:"sidebar-logo"},"<","Team",n.a.createElement("span",null,"Work","/>")),n.a.createElement("div",{className:"item"},n.a.createElement("img",{alt:"logo",width:"100%",src:z.a})),n.a.createElement("ul",null,q.map((function(e){return n.a.createElement(H,{key:e.link,link:e.link,iconName:e.iconName,content:e.content})})))),n.a.createElement("div",{onClick:function(){return t()},role:"button",tabIndex:"0",className:r?"nav-btn":"nav-btn close-btn"},r?n.a.createElement(d.a,{name:"times",size:"large"}):n.a.createElement(d.a,{name:"bars",size:"large"})))},B=r(345),W=r(341),M=r(343),V=localStorage.getItem("jwtToken"),K=Object(o.b)((function(e){return{user:e.users}}),{getUsers:function(){return function(){var e=Object(v.a)(g.a.mark((function e(t){var r,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USERS_LOADING"}),r=P("/auth/users"),e.next=4,S(r,"GET",null,V);case 4:if(200===(a=e.sent).statusCode){e.next=7;break}return e.abrupt("return",t({type:"USER_ERROR",payload:a}));case 7:return n=a.data,e.abrupt("return",t({type:"GET_USERS",payload:n}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getUsers,r=e.user;Object(a.useEffect)((function(){t()}),[t]);var l=r.loading,c=r.users;return n.a.createElement("div",null,l?n.a.createElement(s.a,{columns:"1"},n.a.createElement(s.a.Column,null,n.a.createElement(B.a,{active:!0,inverted:!0},n.a.createElement(W.a,{inverted:!0},"Loading..")))):n.a.createElement(M.a,{striped:!0,color:"blue"},n.a.createElement(M.a.Header,null,n.a.createElement(M.a.Row,null,n.a.createElement(M.a.HeaderCell,null,"First Name"),n.a.createElement(M.a.HeaderCell,null,"Last Name"),n.a.createElement(M.a.HeaderCell,null,"E-mail"),n.a.createElement(M.a.HeaderCell,null,"Department"),n.a.createElement(M.a.HeaderCell,null,"Job Role"),n.a.createElement(M.a.HeaderCell,null,"User Role"))),n.a.createElement(M.a.Body,null,c.map((function(e){return n.a.createElement(M.a.Row,{key:e.id},n.a.createElement(M.a.Cell,null,k(e.firstName)),n.a.createElement(M.a.Cell,null,k(e.lastName)),n.a.createElement(M.a.Cell,null,e.email),n.a.createElement(M.a.Cell,null,k(e.department)),n.a.createElement(M.a.Cell,null,k(e.jobRole)),n.a.createElement(M.a.Cell,null,k(e.userRole)))})))))})),Q=r(339),X=r(340),Y=r(337);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=Object(o.b)((function(e){return{user:e.users}}),{addUser:function(e){return function(){var t=Object(v.a)(g.a.mark((function t(r){var a,n,l,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=P("/auth/create-user"),r({type:"GET_USERS_LOADING"}),t.next=4,S(a,"POST",e,V);case 4:if(422!==(n=t.sent).statusCode){t.next=8;break}return l=Object.values(n.errors).join(",").toString(),t.abrupt("return",r({type:"USER_ERROR",payload:l}));case 8:if(201===n.statusCode){t.next=10;break}return t.abrupt("return",r({type:"USER_ERROR",payload:n.error}));case 10:return c=n.data,t.abrupt("return",r({type:"ADD_USER",payload:c}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearError:function(){return function(e){e({type:"CLEAR_USERS_ERROR"})}}})((function(e){var t=e.addUser,r=e.clearError,l=e.user,c=l.error,o=l.users,u=Object(a.useState)(!1),i=Object(p.a)(u,2),s=i[0],d=i[1],O=Object(a.useState)({firstName:"",lastName:"",password:"",gender:"",department:"",address:"",email:"",jobRole:"",userRole:""}),g=Object(p.a)(O,2),v=g[0],y=g[1],j=Object(a.useState)(!1),w=Object(p.a)(j,2),R=w[0],P=w[1];Object(a.useEffect)((function(){o[0].email===v.email&&(y({firstName:"",lastName:"",password:"",gender:"",department:"",address:"",email:"",jobRole:"",userRole:""}),P(!1),d(!0))}),[l.users]);var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null==t?e.target:t,a=r.value,n=r.name;return y($({},v,Object(m.a)({},n,a)))};return n.a.createElement(f.a,{error:!!c,success:s,onSubmit:function(e){e.preventDefault(),t(v)},className:"add-user-form"},n.a.createElement(E.a,{onDismiss:function(){return r()},error:!0,header:"Form Value Error",content:c}),n.a.createElement(E.a,{onDismiss:function(){return d(!1)},success:!0,header:"Successful",content:"User Account created"}),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,{control:b.a,autoFocus:!0,required:!0,value:v.firstName,onChange:S,label:"First name",name:"firstName",placeholder:"First name"}),n.a.createElement(f.a.Field,{control:b.a,required:!0,value:v.lastName,onChange:S,name:"lastName",label:"Last name",placeholder:"Last name"}),n.a.createElement(f.a.Field,{control:Q.a,required:!0,value:v.gender,onChange:S,name:"gender",label:"Gender",options:[{key:"m",text:"Male",value:"male"},{key:"f",text:"Female",value:"female"}],placeholder:"Gender"})),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,{control:b.a,required:!0,value:v.department,onChange:S,name:"department",label:"Department",placeholder:"Department"}),n.a.createElement(f.a.Field,{control:b.a,required:!0,value:v.jobRole,onChange:S,name:"jobRole",label:"Job Role",placeholder:"Job Role"}),n.a.createElement(f.a.Field,{control:b.a,required:!0,value:v.email,onChange:S,name:"email",type:"email",label:"Email",placeholder:"Email"})),n.a.createElement(f.a.Group,{widths:"equal"},n.a.createElement(f.a.Field,{control:X.a,required:!0,value:v.address,rows:1,onChange:S,name:"address",label:"Address",placeholder:"Home address"}),n.a.createElement(f.a.Field,{control:b.a,required:!0,value:v.password,onChange:S,name:"password",type:"password",label:"Password",placeholder:"Password"})),n.a.createElement(f.a.Field,{checked:v.checkState,onChange:function(){return P(!R),y($({},v,R?{userRole:"Employee"}:{userRole:"Admin"}))},control:Y.a,label:"Give admin right"}),n.a.createElement(f.a.Field,{control:h.a},"Submit"))})),te=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),r=t[0],l=t[1];return n.a.createElement(s.a,null,n.a.createElement(s.a.Row,null,n.a.createElement(s.a.Column,{floated:"right",width:3},n.a.createElement(h.a,{toggle:!0,onClick:function(){return l(!r)}},r?n.a.createElement(d.a,{name:"angle down"}):n.a.createElement(d.a,{name:"angle up"}),"Create Account"))),n.a.createElement(s.a.Row,{columns:1},n.a.createElement(s.a.Column,null,r&&n.a.createElement(ee,null))))},re=function(){return n.a.createElement("div",null,n.a.createElement("h2",null,"Users Panel"),n.a.createElement(te,null),n.a.createElement(K,null))},ae=[{path:"/".concat("dashboard"),exact:!0,sidebar:function(){return n.a.createElement("div",null,"Feeds")},content:function(){return n.a.createElement("h2",null,"Feeds page")}},{path:"/".concat("dashboard","/gif"),sidebar:function(){return n.a.createElement("div",null,"gifs")},content:function(){return n.a.createElement("h2",null,"Gifs page")}},{path:"/".concat("dashboard","/article"),sidebar:function(){return n.a.createElement("div",null,"Articles")},content:function(){return n.a.createElement("h2",null,"Article Page")}},{path:"/".concat("dashboard","/profile"),sidebar:function(){return n.a.createElement("div",null,"Profiles")},content:function(){return n.a.createElement("h2",null,"Profile Page")}},{path:"/".concat("dashboard","/users"),sidebar:function(){return n.a.createElement("div",null,"Users")},content:function(){return n.a.createElement(re,null)}}],ne=(r(324),function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),r=t[0],l=t[1];return n.a.createElement("div",{className:"wrapper"},n.a.createElement(J,{toggler:function(){return l(!r)},isOpen:r}),n.a.createElement("div",{className:r?"main_content":"main_content open-main"},n.a.createElement("div",{className:"info"},n.a.createElement("div",null,n.a.createElement(i.d,null,ae.map((function(e){return n.a.createElement(i.b,{key:e.path,path:e.path,exact:e.exact},n.a.createElement(e.content,null))})))))))}),le=r(41),ce=r(181),oe=r(182);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se={isAuthenticated:!1,user:{},token:"",error:null,loading:!1},me=r(183);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe={users:[],error:null,loading:!1},Ee=Object(le.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return ie({},e,{isAuthenticated:!!t.payload,user:t.payload.user,token:t.payload.token,loading:!1});case"AUTH_LOADING":return ie({},e,{loading:!0});case"AUTH_ERROR":return ie({},e,{error:t.payload,loading:!1});case"CLEAR_AUTH_ERROR":return ie({},e,{error:null});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return de({},e,{loading:!1,users:t.payload.reverse(),error:null});case"ADD_USER":return de({},e,{loading:!1,users:[t.payload].concat(Object(me.a)(e.users)),error:null});case"GET_USERS_LOADING":return de({},e,{loading:!0});case"USER_ERROR":return de({},e,{error:t.payload,loading:!1});case"CLEAR_USERS_ERROR":return de({},e,{error:null});default:return e}}}),be=[oe.a],he=Object(le.createStore)(Ee,{},Object(ce.composeWithDevTools)(le.applyMiddleware.apply(void 0,be))),Oe=(r(325),function(){return n.a.createElement(o.a,{store:he},n.a.createElement(u.a,{basename:"/Teamwork-frontend"},n.a.createElement(i.d,null,n.a.createElement(G,{path:"/dashboard",component:ne})),n.a.createElement(i.b,{exact:!0,path:"/",component:x})))});r(326);c.a.render(n.a.createElement(Oe,null),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.a8d91567.chunk.js.map